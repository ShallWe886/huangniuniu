{"version":3,"sources":["uni-app:///main.js","webpack:////Users/shallwe/Documents/workspace/sihuo/AccompanyingConsultation/aUserPages/vipPages/wholeWriteOrder.vue?e7da","webpack:////Users/shallwe/Documents/workspace/sihuo/AccompanyingConsultation/aUserPages/vipPages/wholeWriteOrder.vue?2c48","webpack:////Users/shallwe/Documents/workspace/sihuo/AccompanyingConsultation/aUserPages/vipPages/wholeWriteOrder.vue?4085","webpack:////Users/shallwe/Documents/workspace/sihuo/AccompanyingConsultation/aUserPages/vipPages/wholeWriteOrder.vue?dbb6","uni-app:///aUserPages/vipPages/wholeWriteOrder.vue","webpack:////Users/shallwe/Documents/workspace/sihuo/AccompanyingConsultation/aUserPages/vipPages/wholeWriteOrder.vue?a736","webpack:////Users/shallwe/Documents/workspace/sihuo/AccompanyingConsultation/aUserPages/vipPages/wholeWriteOrder.vue?f43e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","minDate","integral_total","pay_integral","popupShow","closeOnClickOverlay","inputList","title","isSure","content","placeholderText","payStyle","name","img","pay_channel","payValue","orderInfo","service_type","hospitalName","clinicName","service_time","patientName","remark","hospital_id","patient_id","department_id","escort","contact","isShow","product_count","time","departmentShow","selecttitle","hospitalShow","hospitalList","clinicList","timeShow","typeList","addressInfo","page","loading","operateType","patientShow","patientList","userInfo","total","discount_total","type","product_type","record_json","onReady","onLoad","console","onShow","methods","selectPayIntegral","integralCompute","remainder","num1","getUserInfo","addPatient","uni","url","formatter","sureSelect","cancelSelect","sureSelectTime","getFullTime","cancelSelectTime","openHospital","icon","closeSelectHospital","getFresh","getPull","getHospitalList","address","getDepartment","sureHospital","_this","getPatientFresh","getPatientData","pageSize","getPatient","closeSelectPatient","surePatient","selectPayStyle","toPay","integral","amount","provider","success","fail","setTimeout","appid","noncestr","package","partnerid","prepayid","timestamp","sign","duration","timeStamp","nonceStr","signType","paySign","getPushMes","tmplIds","getInfo"],"mappings":";;;;;;;;;;;;;AAAA;AAE4D;AAC5D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAAC;AAG3DC,UAAU,CAACC,wBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwI;AACxI;AACmE;AACL;AACsC;;;AAGpG;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,qFAAM;AACR,EAAE,sGAAM;AACR,EAAE,+GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0GAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,mWAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxDA;AAAA;AAAA;AAAA;AAA41B,CAAgB,6yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCsNh3B;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,EACA;MACAC;QACAC;QACAC;QACAC;MACA,GAcA;QACAF;QACAC;QACAC;MACA;MACA;MACA;MACA;MACA;MACA;MAAA,CAEA;;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QAAA;QACAC;QAAA;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACA;MACA;MACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACA7B;MACA8B;MACAC;MACAC;MACAC;MACA9B;MACA+B;MACAC;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACAC;IAIA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACAC;MACA;MACA;QACA;QACA;QACA;MACA;MAEA;MACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACAJ;MACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;QACAK;QACA;MACA;QACAA;QACA;MACA;MACAC;MACA;MACA;MACAN;IAGA;IACAO;MAAA;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACAC;QACAC;MACA;IACA;IACAC;MACA;QACA;MACA;MACA;QACA;MACA;MACA;QACA;MACA;MACA;QACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACAZ;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAa;MAAA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACAd;MACA;MACA;MACA;MACAA;IAEA;IACAe;MAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QAAA;QACA;QACA;MACA;QAAA;QACA;UAAA;UACAR;YACAtD;YACA+D;UACA;UACA;UACA;QACA;;QACA;MACA;QACA;MACA;QACA;QACA;MACA;MACA;IAEA;IACAC;MAAA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;MACA;MACAtB;MACA;QACAb;QACA;QACAoC;MACA;QACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;MACA;MACA;QAAArD;MAAA;QACA;QACA;MACA;IAEA;IACAsD;MAAA;MACA;MACAC;MACAA;MACAA;MACAA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MAAA;MACA;QACAzC;QACA0C;MACA;QACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACAjC;MACA;MACAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IAGA;IACAkC;MAAA;MAAA;MACA;QAAA;QAAA;MAAA;MACA;QAAA;UAAAxE;UAAAyE;UAAAtC;QACA;QAAA;UAAAuC;UAAA1E;UAAAyE;UAAAtC;QAAA;MAAA;MACAG;MACA;QACA;QACA;UACA;YAAA;YACAA;YACA;cACAS;gBACAtD;gBACA+D;cACA;cACA;YACA;YAIAQ;YAEA;UACA;YAAA;YACA;YACA;YACA;YACAhB;YACAV;YACAS;cACA4B;cAAA;cACAzE;cAAA;cACA0E;gBACA7B;kBACAC;gBACA;gBACAV;cACA;cACAuC;gBACAvC;gBACAwC;kBACA/B;oBACAC;kBACA;gBACA;cACA;YACA;YACA;UACA;YAAA;YACAD;cACA4B;cACAzE;gBACA6E;gBAAA;gBACAC;gBAAA;gBACAC;gBAAA;gBACAC;gBAAA;gBACAC;gBAAA;gBACAC;gBAAA;gBACAC;cACA;cACAT;gBACAtC;gBACAS;kBACAC;gBACA;cACA;cACA6B;gBACAvC;gBACAS;kBACAtD;kBACA+D;kBACA8B;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;cACA;YACA;;YACA;UACA;YAAA;YACAvC;cACA4B;cACAY;cACAC;cACAP;cACAQ;cACAC;cACAd;gBACAtC;gBACA0B;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;cACA;;cACAa;gBACAvC;gBACAS;kBACAtD;kBACA+D;kBACA8B;gBACA;gBACAR;kBACA/B;oBACAC;kBACA;gBACA;cACA;YACA;YACA;UACA;YACAV;QAAA;QAEA;QACA;QACA;MACA;QACAA;QACAS;UACAtD;UACA+D;QACA;MACA;IAEA;IACAmC;MACA5C;QACA6C;QACAhB;UACA7B;YACAC;UACA;UACAV;QACA;QACAuC;UACAvC;UACAS;YACAC;UACA;QACA;MACA;IACA;IACA6C;MACA;MACA1D;MACAG;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjtBA;AAAA;AAAA;AAAA;AAA+lD,CAAgB,o8CAAG,EAAC,C;;;;;;;;;;;ACAnnD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"aUserPages/vipPages/wholeWriteOrder.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;;import '@dcloudio/vue-cli-plugin-uni/packages/uni-push/dist/uni-push.es.js';\nimport Vue from 'vue'\nimport Page from './aUserPages/vipPages/wholeWriteOrder.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./wholeWriteOrder.vue?vue&type=template&id=5beae197&scoped=true&\"\nvar renderjs\nimport script from \"./wholeWriteOrder.vue?vue&type=script&lang=js&\"\nexport * from \"./wholeWriteOrder.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wholeWriteOrder.vue?vue&type=style&index=0&id=5beae197&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5beae197\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"aUserPages/vipPages/wholeWriteOrder.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wholeWriteOrder.vue?vue&type=template&id=5beae197&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uDatetimePicker: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker\" */ \"@/uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.hospitalList.length\n  var g1 = _vm.patientList.length\n  var g2 = _vm.clinicList.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wholeWriteOrder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wholeWriteOrder.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view :class=\"{popupShow:popupShow}\">\r\n\t\t<view class=\"box_690 padding_0_l margin_left_l \">\r\n\t\t\t<view>\r\n\t\t\t\t<view class=\"flex_row padding_m_0 border_bottom\">\r\n\t\t\t\t\t<view class=\"font_size_text_xl color_black_333 font_weight\">\r\n\t\t\t\t\t\t就诊医院<text class=\"color_orange margin_left_s\">*</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"margin_left flex_row\" @click=\"openHospital(1,orderInfo.service_type,0)\">\r\n\t\t\t\t\t\t<view class=\"font_size_text_l text_align_right margin_right_s\">\r\n\t\t\t\t\t\t\t<text class=\"color_black_beb\" v-if=\"!orderInfo.hospitalName\">请选择就诊医院</text>\r\n\t\t\t\t\t\t\t<text v-if=\"orderInfo.hospitalName\"\r\n\t\t\t\t\t\t\t\tclass=\"color_black_333\">{{orderInfo.hospitalName}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<u-icon name=\"arrow-right\" color=\"#B4B4B4\"></u-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex_row padding_m_0 border_bottom\">\r\n\t\t\t\t\t<view class=\"font_size_text_xl color_black_333 font_weight\">\r\n\t\t\t\t\t\t就诊科室<text class=\"color_orange margin_left_s\">*</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"margin_left flex_row\"\r\n\t\t\t\t\t\t@click=\"openHospital(2,orderInfo.service_type,orderInfo.hospital_id)\">\r\n\t\t\t\t\t\t<view class=\"font_size_text_l text_align_right margin_right_s\">\r\n\t\t\t\t\t\t\t<text class=\"color_black_beb\" v-if=\"!orderInfo.clinicName\">请选择就诊科室</text>\r\n\t\t\t\t\t\t\t<text v-if=\"orderInfo.clinicName\" class=\"color_black_333\">{{orderInfo.clinicName}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<u-icon name=\"arrow-right\" color=\"#B4B4B4\"></u-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex_row padding_m_0 border_bottom\">\r\n\t\t\t\t\t<view class=\"font_size_text_xl color_black_333 font_weight\">\r\n\t\t\t\t\t\t就诊时间<text class=\"color_orange margin_left_s\">*</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"margin_left flex_row\" @click=\"openHospital(3,orderInfo.service_type,0)\">\r\n\t\t\t\t\t\t<view class=\"font_size_text_l text_align_right margin_right_s\">\r\n\t\t\t\t\t\t\t<text class=\"color_black_beb\" v-if=\"!orderInfo.service_time\">请选择就诊时间</text>\r\n\t\t\t\t\t\t\t<text v-if=\"orderInfo.service_time\"\r\n\t\t\t\t\t\t\t\tclass=\"color_black_333\">{{orderInfo.service_time}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<u-icon name=\"arrow-right\" color=\"#B4B4B4\"></u-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex_row padding_m_0 border_bottom\">\r\n\t\t\t\t\t<view class=\"font_size_text_xl color_black_333 font_weight\">\r\n\t\t\t\t\t\t就诊患者<text class=\"color_orange margin_left_s\">*</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"margin_left flex_row\" @click=\"openHospital(4,orderInfo.service_type)\">\r\n\t\t\t\t\t\t<view class=\"font_size_text_l text_align_right margin_right_s\">\r\n\t\t\t\t\t\t\t<text class=\"color_black_beb\" v-if=\"!orderInfo.patientName\">请选择就诊患者</text>\r\n\t\t\t\t\t\t\t<text v-if=\"orderInfo.patientName\" class=\"color_black_333\">{{orderInfo.patientName}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<u-icon name=\"arrow-right\" color=\"#B4B4B4\"></u-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- <view class=\"flex_row padding_m_0 border_bottom\">\r\n\t\t\t\t\t<view class=\"font_size_text_xl color_black_333 font_weight\">\r\n\t\t\t\t\t\t特殊要求\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"margin_left flex_row\">\r\n\t\t\t\t\t\t<input type=\"text\" class=\"text_align_right margin_right_s color_black_beb\"\r\n\t\t\t\t\t\t\tv-model=\"orderInfo.remark\" placeholder=\"请填写备注\"\r\n\t\t\t\t\t\t\tplaceholder-class=\"font_size_text_l color_black_beb\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view> -->\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex_row padding_m_0 border_bottom\">\r\n\t\t\t\t<view class=\"font_size_text_xl color_black_333 font_weight\">\r\n\t\t\t\t\t随行人员\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"margin_left flex_row\">\r\n\t\t\t\t\t<input type=\"text\" class=\"text_align_right margin_right_s\" v-model=\"orderInfo.escort\"\r\n\t\t\t\t\t\tplaceholder=\"请填写随行人员姓名\" placeholder-class=\"font_size_text_l\">\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex_row padding_m_0 border_bottom\">\r\n\t\t\t\t<view class=\"font_size_text_xl color_black_333 font_weight\">\r\n\t\t\t\t\t随行人员手机号\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"margin_left flex_row\">\r\n\t\t\t\t\t<input type=\"number\" class=\"text_align_right margin_right_s\" v-model=\"orderInfo.contact\"\r\n\t\t\t\t\t\tplaceholder=\"请填写随行人员手机号\" placeholder-class=\"font_size_text_l\">\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex_row padding_m_0 border_bottom\">\r\n\t\t\t\t<view class=\"font_size_text_xl color_black_333 font_weight\">\r\n\t\t\t\t\t备注\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"margin_left flex_row\">\r\n\t\t\t\t\t<input type=\"text\" class=\"text_align_right margin_right_s\" v-model=\"orderInfo.remark\"\r\n\t\t\t\t\t\tplaceholder=\"请填写备注\" placeholder-class=\"font_size_text_l\">\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"margin_l_0 font_size_text_xl color_black_333 font_weight\">\r\n\t\t\t\t支付方式\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex_row width_all margin_top_s padding_bottom_xl\">\r\n\t\t\t\t<image src=\"/static/image/pay03.png\" class=\"pay_img\"></image>\r\n\t\t\t\t<view class=\"font_size_text_l color_black_333 font_weight margin_left_l\">\r\n\t\t\t\t\t积分 <text class=\"color_orange font_size_text_l font_weight margin_left_m\"\r\n\t\t\t\t\t\t>（积分：{{userInfo.user_integral || '0.00'}}）</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"margin_left\" @click=\"selectPayIntegral\">\r\n\t\t\t\t\t<image src=\"/static/image/select01.png\" class=\"icon_img\" v-if=\"pay_integral\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t\t<image src=\"/static/image/select02.png\" class=\"icon_img\" v-if=\"!pay_integral\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t</view>\r\n\t\t\t\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex_row width_all margin_top_s padding_bottom_xl\" v-for=\"(item, index) in payStyle\"\r\n\t\t\t\t:key=\"index\">\r\n\t\t\t\t<image :src=\"item.img\" class=\"pay_img\"></image>\r\n\t\t\t\t<view class=\"font_size_text_l color_black_333 font_weight margin_left_l\">\r\n\t\t\t\t\t{{item.name}} <text class=\"color_orange font_size_text_l font_weight margin_left_m\"\r\n\t\t\t\t\t\tv-if=\"index == 0\">（余额：{{userInfo.balance || '0.00'}}）</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"margin_left\" @click=\"selectPayStyle(item, index)\">\r\n\t\t\t\t\t<image src=\"/static/image/select01.png\" class=\"icon_img\" v-if=\"pay_channel == item.pay_channel\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t\t<image src=\"/static/image/select02.png\" class=\"icon_img\" v-if=\"pay_channel != item.pay_channel\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex_row width_all margin_top_s padding_bottom_xl\">\r\n\t\t\t\t<view class=\"font_size_text_l color_black_333 font_weight margin_left_l\">\r\n\t\t\t\t\t总金额\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"margin_left\" style=\"font-size: 24rpx;\">\r\n\t\t\t\t\t{{total || 0}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex_row width_all margin_top_s padding_bottom_xl\">\r\n\t\t\t\t<view class=\"font_size_text_l color_black_333 font_weight margin_left_l\">\r\n\t\t\t\t\t积分抵扣\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"margin_left\" style=\"font-size: 24rpx;\">\r\n\t\t\t\t\t{{integral_total || 0}}<text v-if=\"pay_integral && integral_total && integral_total >= 20\">积分抵扣{{total - discount_total}}元</text>\t\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex_row width_all margin_top_s padding_bottom_xl\">\r\n\t\t\t\t<view class=\"font_size_text_l color_black_333 font_weight margin_left_l\">\r\n\t\t\t\t\t优惠后金额\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"margin_left\" style=\"font-size: 24rpx;\">\r\n\t\t\t\t\t{{discount_total || 0}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"sure_buttton margin_top_xxl margin_bottom_l\" @click=\"toPay\">\r\n\t\t\t立即支付\r\n\t\t</view>\r\n\t\t<u-datetime-picker :show=\"timeShow\" :closeOnClickOverlay=\"closeOnClickOverlay\" v-model=\"time\" mode=\"datetime\"\r\n\t\t\t:formatter=\"formatter\" :minDate=\"minDate\" @confirm=\"sureSelectTime\" @cancel=\"cancelSelectTime\" visibleItemCount=\"12\"\r\n\t\t\titemHeight=\"48\" confirmColor=\"#FF6437\"></u-datetime-picker>\r\n\t\t<u-popup :show=\"hospitalShow\" mode=\"bottom\" :round=\"15\" :closeable=\"true\" @close=\"closeSelectHospital\"\r\n\t\t\t@scrolltolower=\"getPull\">\r\n\t\t\t<view class=\"padding_l text_align_center font_size_title_s color_black font_weight\">\r\n\t\t\t\t选择就诊医院\r\n\t\t\t</view>\r\n\t\t\t<scroll-view scroll-y=\"true\" style=\"height: 450rpx;\">\r\n\t\t\t\t<view class=\"margin_top_l text_align_center font_size_title_s color_black_999\"\r\n\t\t\t\t\tv-if=\"hospitalList.length == 0\">\r\n\t\t\t\t\t暂无可选医院\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"font_size_text_l color_black_333 border_bottom padding_l text_align_center\"\r\n\t\t\t\t\tv-for=\"(item,index) in hospitalList\" :key=\"index\" @click=\"sureHospital(item)\">\r\n\t\t\t\t\t{{item.name}}\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</u-popup>\r\n\t\t<u-popup :show=\"patientShow\" mode=\"bottom\" :round=\"15\" :closeable=\"true\" @close=\"closeSelectPatient\"\r\n\t\t\t@scrolltolower=\"getPatient\">\r\n\t\t\t<view class=\"padding_l text_align_center font_size_title_s color_black font_weight\">\r\n\t\t\t\t选择就诊人\r\n\t\t\t</view>\r\n\t\t\t<scroll-view scroll-y=\"true\" style=\"height: 450rpx;\">\r\n\t\t\t\t<view class=\"margin_top_l text_align_center font_size_title_s color_black_999\"\r\n\t\t\t\t\tv-if=\"patientList.length == 0\">\r\n\t\t\t\t\t暂无可选就诊人\r\n\t\t\t\t\t<view class=\"sure_buttton \" style=\"position: fixed;bottom: 60rpx;\" @click=\"addPatient(0)\">\r\n\t\t\t\t\t\t添加就诊人信息\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"font_size_text_l color_black_333 border_bottom padding_l text_align_center\"\r\n\t\t\t\t\tv-for=\"(item,index) in patientList\" :key=\"index\" @click=\"surePatient(item)\">\r\n\t\t\t\t\t{{item.patient_name}}\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</u-popup>\r\n\t\t<!-- <u-picker :show=\"departmentShow\" :columns=\"clinicList\" keyName=\"name\" :title=\"selecttitle\" @confirm=\"sureSelect\"\r\n\t\t\t@cancel=\"cancelSelect\" visibleItemCount=\"12\" itemHeight=\"48\" confirmColor=\"#FF6437\">\r\n\t\t</u-picker> -->\r\n\t\t<u-popup :show=\"departmentShow\" mode=\"bottom\" :round=\"15\" :closeable=\"true\" @close=\"cancelSelect\"\r\n\t\t\t@scrolltolower=\"getPull\">\r\n\t\t\t<view class=\"padding_l text_align_center font_size_title_s color_black font_weight\">\r\n\t\t\t\t选择就诊科室\r\n\t\t\t</view>\r\n\t\t\t<scroll-view scroll-y=\"true\" style=\"height: 450rpx;\">\r\n\t\t\t\t<view class=\"margin_top_l text_align_center font_size_title_s color_black_999\"\r\n\t\t\t\t\tv-if=\"clinicList.length == 0\">\r\n\t\t\t\t\t暂无可选科室\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"font_size_text_l color_black_333 border_bottom padding_l text_align_center\"\r\n\t\t\t\t\tv-for=\"(item,index1) in clinicList\" :key=\"index1\" @click=\"sureSelect(item)\">\r\n\t\t\t\t\t{{item.name}}\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</u-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tminDate: Number(new Date()),\r\n\t\t\t\tintegral_total: 0,\r\n\t\t\t\tpay_integral: false,\r\n\t\t\t\tpopupShow: false,\r\n\t\t\t\tcloseOnClickOverlay: true,\r\n\t\t\t\tinputList: [{\r\n\t\t\t\t\t\ttitle: '就诊医院',\r\n\t\t\t\t\t\tisSure: true,\r\n\t\t\t\t\t\tcontent: '',\r\n\t\t\t\t\t\tplaceholderText: \"请选择就诊医院\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '就诊科室',\r\n\t\t\t\t\t\tisSure: true,\r\n\t\t\t\t\t\tcontent: '',\r\n\t\t\t\t\t\tplaceholderText: \"请选择就诊科室\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '就诊时间',\r\n\t\t\t\t\t\tisSure: true,\r\n\t\t\t\t\t\tcontent: '',\r\n\t\t\t\t\t\tplaceholderText: \"请选择就诊时间\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '就诊患者',\r\n\t\t\t\t\t\tisSure: true,\r\n\t\t\t\t\t\tcontent: '',\r\n\t\t\t\t\t\tplaceholderText: \"请选择就诊患者\"\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tpayStyle: [{\r\n\t\t\t\t\t\tname: '咚咚币',\r\n\t\t\t\t\t\timg: '/static/image/pay03.png',\r\n\t\t\t\t\t\tpay_channel: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '微信支付',\r\n\t\t\t\t\t\timg: '/static/image/pay01.png',\r\n\t\t\t\t\t\tpay_channel: 3\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '支付宝支付',\r\n\t\t\t\t\t\timg: '/static/image/pay02.png',\r\n\t\t\t\t\t\tpay_channel: 2\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '微信支付',\r\n\t\t\t\t\t\timg: '/static/image/pay01.png',\r\n\t\t\t\t\t\tpay_channel: 4\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t// \tname: '支付宝支付',\r\n\t\t\t\t\t// \timg: '/static/image/pay02.png',\r\n\t\t\t\t\t// \tpay_channel: 5\r\n\t\t\t\t\t// },\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t],\r\n\t\t\t\tpayValue: '微信支付',\r\n\t\t\t\torderInfo: {\r\n\t\t\t\t\tservice_type: 4,\r\n\t\t\t\t\thospitalName: '',\r\n\t\t\t\t\tclinicName: '',\r\n\t\t\t\t\tservice_time: '',\r\n\t\t\t\t\tpatientName: '',\r\n\t\t\t\t\tremark: '',\r\n\t\t\t\t\thospital_id: '',\r\n\t\t\t\t\tpatient_id: '',\r\n\t\t\t\t\tdepartment_id: '',\r\n\t\t\t\t\tescort: '', //随行人员\r\n\t\t\t\t\tcontact: '', //随行人员联系方式\r\n\t\t\t\t\tisShow: false,\r\n\t\t\t\t\tproduct_count: 1,\r\n\t\t\t\t},\r\n\t\t\t\ttime: Number(new Date()),\r\n\t\t\t\tdepartmentShow: false,\r\n\t\t\t\tselecttitle: '',\r\n\t\t\t\thospitalShow: false, //医院弹窗\r\n\t\t\t\thospitalList: [], //医院列表\r\n\t\t\t\tclinicList: [],\r\n\t\t\t\t// clinicList: [\r\n\t\t\t\t// \t[]\r\n\t\t\t\t// ], //科室列表\r\n\t\t\t\ttimeShow: false,\r\n\t\t\t\ttypeList: [], //就诊类型\r\n\t\t\t\taddressInfo: null, // 定位信息\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tloading: true,\r\n\t\t\t\toperateType: 4, //选择时的操作类型\r\n\t\t\t\tpatientShow: false, //患者弹窗\r\n\t\t\t\tpatientList: [], //患者列表\r\n\t\t\t\tpay_channel: 4,\r\n\t\t\t\tuserInfo: {},\r\n\t\t\t\ttotal: 0,\r\n\t\t\t\tdiscount_total: 0,\r\n\t\t\t\ttype: 0.1,\r\n\t\t\t\tservice_type: 0,\r\n\t\t\t\tproduct_type: 0,\r\n\t\t\t\trecord_json: [],\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\t// 微信小程序需要用此写法\r\n\t\t\tthis.$refs.datetimePicker.setFormatter(this.formatter)\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tconsole.log('options', options, new Date());\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tthis.pay_channel = 3;\r\n\t\t\t// #endif\r\n\t\t\tthis.service_type = options.service_type\r\n\t\t\tthis.orderInfo.service_type = options.service_type;\r\n\t\t\tthis.orderInfo.product_count = options.product_count ? options.product_count : 1;\r\n\t\t\tthis.product_type = options.product_type ? options.product_type : 0;\r\n\t\t\tthis.total = options.total\r\n\t\t\tthis.discount_total = options.total\r\n\t\t\tthis.type = options.type\r\n\t\t\tthis.addressInfo = uni.getStorageSync('addressInfo')\r\n\t\t\tthis.getUserInfo()\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.getPatientFresh()\r\n\t\t\tthis.record_json = [];\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tselectPayIntegral() {\r\n\t\t\t\t//根据沟通，客户希望积分能够兑换现金抵扣，例如XX积分=XX元，（20积分分等于一元，每次不能抵扣超过当前订单总额的30%）\r\n\t\t\t\tif(this.userInfo.user_integral <20) {\r\n\t\t\t\t\tthis.pay_integral = false\r\n\t\t\t\t\tthis.integral_total = 0;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.pay_integral = !this.pay_integral\r\n\t\t\t\tif(this.pay_integral) {\r\n\t\t\t\t\tthis.integralCompute()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.discount_total = this.total\r\n\t\t\t\t\tthis.integral_total = 0;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tintegralCompute() {\r\n\t\t\t\t//0.2积分 == 1分  2积分=1毛   #跑腿总费用的30%，全程陪诊不可超过20%，VIP陪诊不可超过10%\r\n\t\t\t\tlet price = (this.total*this.type).toFixed(2)\r\n\t\t\t\tconsole.log('jiage', this.total, this.type, this.total*this.type);\r\n\t\t\t\tif(price <= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//抵扣所需积分\r\n\t\t\t\tlet num = (price*100)*0.2\r\n\t\t\t\tlet num1 = 0;\r\n\t\t\t\tlet remainder = 0;\r\n\t\t\t\tif(num > this.userInfo.user_integral) {\r\n\t\t\t\t\tremainder = this.userInfo.user_integral%20\r\n\t\t\t\t\tthis.integral_total = this.userInfo.user_integral-remainder;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tremainder = num%20\r\n\t\t\t\t\tthis.integral_total = num-remainder;\r\n\t\t\t\t}\r\n\t\t\t\tnum1 = (this.integral_total/0.2)/100\r\n\t\t\t\tthis.integral_total = this.integral_total.toFixed(2)\r\n\t\t\t\tthis.discount_total = (this.total - num1.toFixed(2)).toFixed(2)\r\n\t\t\t\tconsole.log('积分转化为分', price, num,num1,this.discount_total);\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tgetUserInfo(e) {\r\n\t\t\t\tthis.$api.getMyInfo({}).then(res => {\r\n\t\t\t\t\tthis.userInfo = res\r\n\t\t\t\t\tthis.userInfo.user_integral = parseInt(res.user_integral)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\taddPatient(e) {\r\n\t\t\t\t//添加就诊人信息\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/aUserPages/patientList/addPatient?type=' + e\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tformatter(type, value) {\r\n\t\t\t\tif (type === 'year') {\r\n\t\t\t\t\treturn `${value}年`\r\n\t\t\t\t}\r\n\t\t\t\tif (type === 'month') {\r\n\t\t\t\t\treturn `${value}月`\r\n\t\t\t\t}\r\n\t\t\t\tif (type === 'day') {\r\n\t\t\t\t\treturn `${value}日`\r\n\t\t\t\t}\r\n\t\t\t\tif (type === 'hour') {\r\n\t\t\t\t\treturn `${value}时`\r\n\t\t\t\t}\r\n\t\t\t\t// if (type === 'minute') {\r\n\t\t\t\t// \treturn `${value}分`\r\n\t\t\t\t// }\r\n\t\t\t\treturn value\r\n\t\t\t},\r\n\t\t\tsureSelect(e) { // 确定选定科室\r\n\t\t\tconsole.log('选择科室',e);\r\n\t\t\t\t// this.orderInfo.clinicName = e.value[0].name\r\n\t\t\t\t// this.orderInfo.department_id = e.value[0].id\r\n\t\t\t\tthis.orderInfo.clinicName = e.name\r\n\t\t\t\tthis.orderInfo.department_id = e.id\r\n\t\t\t\tthis.departmentShow = !this.departmentShow\r\n\t\t\t\tthis.popupShow = false\r\n\t\t\t},\r\n\t\t\tcancelSelect(e) { //取消选择\r\n\t\t\t\tthis.departmentShow = !this.departmentShow\r\n\t\t\t\tthis.popupShow = false\r\n\t\t\t},\r\n\t\t\tsureSelectTime(e) { //确定选择时间\r\n\t\t\t\tlet time = this.getFullTime(e.value)\r\n\t\t\t\tconsole.log('time', time);\r\n\t\t\t\tthis.orderInfo.service_time = time\r\n\t\t\t\tthis.timeShow = !this.timeShow\r\n\t\t\t\tthis.popupShow = false\r\n\t\t\t\tconsole.log('3333', this.timeShow);\r\n\r\n\t\t\t},\r\n\t\t\tgetFullTime(timestamp) { //时间戳转化\r\n\t\t\t\tlet date = new Date(timestamp); //时间戳为10位需*1000，时间戳为13位的话不需乘1000\r\n\t\t\t\tlet Y = date.getFullYear() + '-';\r\n\t\t\t\tlet M = ((date.getMonth() + 1) < 10 ? '0' + (date.getMonth() + 1) : (date.getMonth() + 1)) + '-';\r\n\t\t\t\tlet D = (date.getDate() < 10 ? '0' + date.getDate() : date.getDate()) + ' ';\r\n\t\t\t\tlet h = (date.getHours() < 10 ? '0' + date.getHours() : date.getHours()) + ':';\r\n\t\t\t\tlet m = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()\r\n\t\t\t\treturn Y + M + D + h + m + ':00';\r\n\t\t\t},\r\n\t\t\tcancelSelectTime(e) { //取消选择\r\n\t\t\t\tthis.timeShow = !this.timeShow\r\n\t\t\t\tthis.popupShow = false\r\n\t\t\t},\r\n\t\t\topenHospital(type, operateType, value) { //打开选择医院的弹窗 type // 1.选择医院 2.选择诊所 3.选择时间 4 // 选择患者\r\n\t\t\t\tthis.operateType = operateType\r\n\t\t\t\tif (type == 1) { // 选择医院\r\n\t\t\t\t\tthis.hospitalShow = true\r\n\t\t\t\t\tthis.getFresh()\r\n\t\t\t\t} else if (type == 2) { //选择诊所\r\n\t\t\t\t\tif (!value || value < 1) { // value 为医院id\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '请先选择医院',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t// this.getDepartment(value)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.getDepartment(value)\r\n\t\t\t\t} else if (type == 3) {\r\n\t\t\t\t\tthis.timeShow = true\r\n\t\t\t\t} else if (type == 4) {\r\n\t\t\t\t\tthis.patientShow = true\r\n\t\t\t\t\tthis.getPatientFresh()\r\n\t\t\t\t}\r\n\t\t\t\tthis.popupShow = true\r\n\r\n\t\t\t},\r\n\t\t\tcloseSelectHospital(e) { // 关闭选择医院的弹窗\r\n\t\t\t\tthis.hospitalShow = false\r\n\t\t\t\tthis.popupShow = false\r\n\t\t\t},\r\n\t\t\tgetFresh(e) { //刷新获取列表\r\n\t\t\t\tthis.hospitalList = []\r\n\t\t\t\tthis.page = 1\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tthis.getHospitalList()\r\n\t\t\t},\r\n\t\t\tgetPull(e) { //分页\r\n\t\t\t\tif (this.loading) {\r\n\t\t\t\t\tthis.getHospitalList()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetHospitalList(e) { // 获取医院列表\r\n\t\t\t\t// this.addressInfo.city = '深圳';\r\n\t\t\t\tconsole.log('this.addressInfo.city', this.addressInfo.city);\r\n\t\t\t\tthis.$api.getHospital({\r\n\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\t// pageSize: 8,\r\n\t\t\t\t\taddress: ''\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.hospitalList = this.hospitalList.concat(res.list)\r\n\t\t\t\t\tthis.page += 1\r\n\t\t\t\t\tthis.loading = res.list.length == 8\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetDepartment(e) { //获取科室列表\r\n\t\t\t\tthis.clinicList = []\r\n\t\t\t\tthis.$api.getDepartmentLists({hospital_id: e}).then(res => {\r\n\t\t\t\t\tthis.clinicList = res\r\n\t\t\t\t\tthis.departmentShow = true\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\tsureHospital(item) { //确定选择的医院\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\t_this.orderInfo.hospitalName = item.name\r\n\t\t\t\t_this.orderInfo.hospital_id = item.id\r\n\t\t\t\t_this.hospitalShow = false\r\n\t\t\t\t_this.popupShow = false\r\n\t\t\t},\r\n\t\t\tgetPatientFresh(e) { //初始化获取患者列表\r\n\t\t\t\tthis.patientList = []\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tthis.page = 1\r\n\t\t\t\tthis.getPatientData()\r\n\t\t\t},\r\n\t\t\tgetPatientData(e) { //获取患者列表\r\n\t\t\t\tthis.$api.getPatientList({\r\n\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\tpageSize: 8\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.patientList = this.patientList.concat(res.list)\r\n\t\t\t\t\tthis.page += 1\r\n\t\t\t\t\tthis.loading = res.list.length == 8\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetPatient(e) { //分页加载\r\n\t\t\t\tif (this.loading) {\r\n\t\t\t\t\tthis.getPatientData()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcloseSelectPatient(e) { //关闭选择列表\r\n\t\t\t\tthis.patientShow = false\r\n\t\t\t\tthis.popupShow = false\r\n\t\t\t},\r\n\t\t\tsurePatient(item) { //选择就诊患者\r\n\t\t\t\tthis.orderInfo.patientName = item.patient_name\r\n\t\t\t\tthis.orderInfo.patient_id = item.id\r\n\t\t\t\tthis.patientShow = false\r\n\t\t\t\tthis.popupShow = false\r\n\t\t\t},\r\n\t\t\tselectPayStyle(item, index) { //选择支付方式 1钱包，2支付宝，3微信支付，4微信小程序支付 5支付宝小程序支付\r\n\t\t\t\tconsole.log(item, index)\r\n\t\t\t\tthis.payValue = item.name;\r\n\t\t\t\tconsole.log('payValue', this.payValue);\r\n\t\t\t\tthis.pay_channel = item.pay_channel\r\n\t\t\t\t// // #ifdef MP-WEIXIN\r\n\t\t\t\t// if(index == 0){\r\n\t\t\t\t// \tthis.pay_channel = 4\r\n\t\t\t\t// }else{\r\n\t\t\t\t// \tthis.pay_channel = index + 1\r\n\t\t\t\t// }\r\n\t\t\t\t// // #endif\r\n\t\t\t\t// // #ifdef APP\r\n\t\t\t\t// this.pay_channel = index +1\r\n\t\t\t\t// // #endif\r\n\t\t\t},\r\n\t\t\ttoPay(e) { //提交订单\r\n\t\t\tlet api = {0: 'addRecord', 1: 'recordVip'}\r\n\t\t\tlet params = {0: {pay_channel: this.pay_channel,integral: this.integral_total,record_json: this.getInfo()\r\n\t\t\t}, 1: {amount: this.total, pay_channel: this.pay_channel,integral: this.integral_total,record_json: this.getInfo()}};\r\n\t\t\t\tconsole.log('info', this.getInfo());\r\n\t\t\tthis.$api[api[this.product_type]](params[this.product_type]).then(res => {\r\n\t\t\t\t\tlet _this = this\r\n\t\t\t\t\tswitch (this.pay_channel) {\r\n\t\t\t\t\t\tcase 1: //东东币\r\n\t\t\t\t\t\tconsole.log('res余额支付', res);\r\n\t\t\t\t\t\t\tif(res.errorCode && res.errorMsg ) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle:res.errorMsg,\r\n\t\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\t\t_this.getPushMes(this.discount_total)\r\n\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 2: //app支付宝支付\r\n\t\t\t\t\t\t\tlet index = res.url.lastIndexOf(\"app_id\")\r\n\t\t\t\t\t\t\tlet url = res.url.substring(index+1,res.url.length);\r\n\t\t\t\t\t\t\t// let url = res.url.split(\"app_id\");\r\n\t\t\t\t\t\t\turl = 'a'+url\r\n\t\t\t\t\t\t\tconsole.log('url', url);\r\n\t\t\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\t\t\tprovider: \"alipay\", //固定值为\"alipay\"\r\n\t\t\t\t\t\t\t\torderInfo: res.url, //此处为服务器返回的订单信息字符串\r\n\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\turl:\"/aUserPages/resultPage/resultPage?type=\"+3+\"&amount=\"+_this.discount_total\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"支付成功\");\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('支付失败:' + JSON.stringify(err));\r\n\t\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\t\turl: '/aUserPages/my/myOrder?status=0'\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 3: //app微信支付\r\n\t\t\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\t\t\tprovider: \"wxpay\",\r\n\t\t\t\t\t\t\t\torderInfo: {\r\n\t\t\t\t\t\t\t\t\tappid: res.appid, // 微信开放平台 - 应用 - AppId，注意和微信小程序、公众号 AppId 可能不一致\r\n\t\t\t\t\t\t\t\t\tnoncestr: res.nonceStr, // 随机字符串\r\n\t\t\t\t\t\t\t\t\tpackage: res.package, // 固定值\r\n\t\t\t\t\t\t\t\t\tpartnerid: res.partnerid, // 微信支付商户号\r\n\t\t\t\t\t\t\t\t\tprepayid: res.prepayid, // 统一下单订单号 \r\n\t\t\t\t\t\t\t\t\ttimestamp: res.timestamp, // 时间戳（单位：秒）\r\n\t\t\t\t\t\t\t\t\tsign: res.sign // 签名，这里用的 MD5/RSA 签名\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('支付成功', res);\r\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\turl:\"/aUserPages/resultPage/resultPage?type=\"+3+\"&amount=\"+_this.discount_total\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('支付失败', e);\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: \"支付失败\",\r\n\t\t\t\t\t\t\t\t\t\ticon:'none',\r\n\t\t\t\t\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t// setTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t// \tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t// \t\turl: '/aUserPages/my/myOrder?status=0'\r\n\t\t\t\t\t\t\t\t\t// \t})\r\n\t\t\t\t\t\t\t\t\t// }, 1000);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 4: //小程序微信支付\r\n\t\t\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\t\t\tprovider: 'wxpay',\r\n\t\t\t\t\t\t\t\ttimeStamp: res.timeStamp,\r\n\t\t\t\t\t\t\t\tnonceStr: res.nonceStr,\r\n\t\t\t\t\t\t\t\tpackage: res.package,\r\n\t\t\t\t\t\t\t\tsignType: res.signType,\r\n\t\t\t\t\t\t\t\tpaySign: res.paySign,\r\n\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('success:' + JSON.stringify(res));\r\n\t\t\t\t\t\t\t\t\t_this.getPushMes(this.discount_total);\r\n\t\t\t\t\t\t\t\t\t// uni.getPushClientId({\r\n\t\t\t\t\t\t\t\t\t// \tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\t// \t\tlet push_clientid = res.cid\r\n\t\t\t\t\t\t\t\t\t// \t\tconsole.log('客户端推送标识:',push_clientid)\r\n\t\t\t\t\t\t\t\t\t// \t},\r\n\t\t\t\t\t\t\t\t\t// \tfail(err) {\r\n\t\t\t\t\t\t\t\t\t// \t\tconsole.log(err)\r\n\t\t\t\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('fail:' + JSON.stringify(err));\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: \"支付失败\",\r\n\t\t\t\t\t\t\t\t\t\ticon:'none',\r\n\t\t\t\t\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\t\turl: '/aUserPages/my/myOrder?status=0'\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tconsole.log('支付方式不对');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// uni.navigateTo({\r\n\t\t\t\t\t// \turl:'/aUserPages/my/myOrder'\r\n\t\t\t\t\t// })\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\tconsole.log('支付错误', error);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: error.msg,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\tgetPushMes(discount_total){\r\n\t\t\t\tuni.requestSubscribeMessage({\r\n\t\t\t\t  tmplIds: [ '52083IMd24SOcYVqMGmmY1DYJxAEMXSuQEFpqmNceIQ', 'hwYtsSpoITsXoYxDqcA3vhN_jASpKpTjj050zpS7g1U', 'fu1zd6WBDdlUHHao9zoiHh2-9ucoHri_yIykQG-v1d4'],\r\n\t\t\t\t  success (res) {\r\n\t\t\t\t\t  uni.navigateTo({\r\n\t\t\t\t\t  \turl:\"/aUserPages/resultPage/resultPage?type=\"+3+\"&amount=\"+discount_total\r\n\t\t\t\t\t  })\r\n\t\t\t\t\t  console.log('小程序推送消息',res);\r\n\t\t\t\t  },\r\n\t\t\t\t  fail(err) {\r\n\t\t\t\t  \tconsole.log('小程序推送消息11111', err);\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:\"/aUserPages/resultPage/resultPage?type=\"+3+\"&amount=\"+discount_total\r\n\t\t\t\t\t})\r\n\t\t\t\t  }\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetInfo(e) {\r\n\t\t\t\tlet record_json = []\r\n\t\t\t\trecord_json.push(this.orderInfo)\r\n\t\t\t\tconsole.log('record_json', record_json);\r\n\t\t\t\tthis.record_json = record_json\r\n\t\t\t\treturn this.record_json\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.popupShow {\r\n\t\toverflow: hidden;\r\n\t\tposition: fixed;\r\n\t\theight: 100vh;\r\n\t\twidth: 100%;\r\n\t}\r\n\t.pay_img {\r\n\t\twidth: 46rpx;\r\n\t\theight: 46rpx;\r\n\t}\r\n\r\n\t.icon_img {\r\n\t\twidth: 32rpx;\r\n\t\theight: 32rpx;\r\n\t}\r\n\r\n\t.sure_buttton {\r\n\r\n\t\tmargin-left: 70rpx;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wholeWriteOrder.vue?vue&type=style&index=0&id=5beae197&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wholeWriteOrder.vue?vue&type=style&index=0&id=5beae197&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1677391602242\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}